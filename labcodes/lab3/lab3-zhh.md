# Rerport: LAB3

计13，张宏辉，2011011237
 
## 练习0：填写已有实验
 - 已完成

## 练习1：给未被映射的地址映射上物理页

 - 请描述页目录项（Pag Director Entry）和页表（Page Table Entry）中组成部分对ucore实现页替换算法的潜在用处。
   - pde和pte中的访问位表示该项最近是否被访问过，修改位表示该项是否被修改过，可用于clock算法和改进的clock算法。
 - 如果ucore的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？
   - 硬件产生缺页中断，查找到内核中相应的中断向量，并跳转到缺页中断服务例程进行相应处理。
 
## 练习2：补充完成基于FIFO的页面替换算法
 
- 设计实现过程
  - 对新加入的swappable pages，调用list_add函数将该新的entry插入到列表的前端。
  - 对于swap out操作，调用list_prev获取位于链表末端的entry，将ptr_page指向的内容赋为entry对应的page的地址。之后调用list_del函数将该entry从链表中删除。

- 如果要在ucore上实现"extended clock页替换算法"请给你的设计方案，现有的swap_manager框架是否足以支持在ucore中实现此算法？如果是，请给你的设计方案。如果不是，请给出你的新的扩展和基此扩展的设计方案。
  - 不足以实现。
    - 设计思路为将所有物理页面串成一个环形链表，表头存在mm_struct的sm_priv变量中，之后在swap_manager的map_swappable中，将相应的虚拟页号和物理页帧对应上，并移动全局指针，并在swap_manager的swap_out_victim中，不断移动指针，并修改相应标识位，直到遇到标识位全为0的页，将其放入磁盘。
  - 需要被换出的页的特征是什么？
    - 换出的页是在指针移动过程中所遇到的第一个标识位全为0的页。
  - 在ucore中如何判断具有这样特征的页？
    - 在指针移动的过程中检查标识位即可。
  - 何时进行换入和换出操作？
    - 换入时机是在发生缺页异常并发现所需页在硬盘上的时执行换入。
    - 换出时机是在pmm发现页不够分配的时候执行换出。
